{
  "datacenter": "{{ hostvars[inventory_hostname].region }}",
  "data_dir": "/opt/consul",
  "bind_addr": "{{ hostvars[inventory_hostname].private_ip }} ",
  "server": false,
  "ui": true,
  "log_level": "warn",
  "retry_join": [
    "{{ hostvars[inventory_hostname].consul }}"
  ],
  "encrypt_verify_incoming": false,
  "encrypt_verify_outgoing": false,
  "verify_incoming": false,
  "verify_incoming_https": false,
  "ports": {
      "http": 8500
  },
  "services":[
    {
      "id": "cache",
      "name": "cache",
      "tags": [
        "cache"
      ],
      "address": "{{ hostvars[inventory_hostname].private_ip }}",
      "port": 80,
      "check": {
        "id": "cache",
        "name": "HTTP Health Check on port 8000",
        "http": "http://localhost:8000/health",
        "method": "POST",
        "header": {
          "Content-Type": ["application/json"]
        },
        "body": "{\"method\":\"health\"}",
        "interval": "10s",
        "timeout": "1s"
      }
    }
  ]
}
