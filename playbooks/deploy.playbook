- name: Setting Up CDN
  hosts: all
  tasks:
  - name: Default playbook
    include: default.playbook

  - name: Setup Mirror Origins
    include: mirror-origin.playbook
    when: "'origin' is in group_names"

  - name: Setup Load Balancers
    include: lb-node.playbook
    when: "'lb' is in group_names"

  - name: Setup Caches
    include: cache-node.playbook
    when: "'cache' is in group_names"

  - name: Reload Nginx
    include: nginx-reload.playbook
